// Ð¦ÐµÐ»ÑŒ: Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ Unsplash, Ð´Ð°Ð²Ð°Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ðµ Ð¸ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ "Ð»Ð°Ð¹Ðº" Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑŽ.
// Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:

// â€¢ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ HTML-ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ, Ð¸Ð¼Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð°, ÐºÐ½Ð¾Ð¿ÐºÐ° "Ð»Ð°Ð¹Ðº" Ð¸ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð»Ð°Ð¹ÐºÐ¾Ð².
// â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ JavaScript Ð¸ Ð²Ð°Ñˆ API-ÐºÐ»ÑŽÑ‡, Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Unsplash ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð°Ð·, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ. ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ, Ñ‡Ñ‚Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾Ð´Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒÑÑ Ð²ÑÐµÐ³Ð´Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ, Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ ÐµÑÑ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ñ€ÑƒÑ‡ÐºÐ° (ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚) Ñƒ API.
// â€¢ ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ðµ Ð¿Ð¾Ð´ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼.
// â€¢ Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð» "Ð»Ð°Ð¹ÐºÐ°". ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð°Ð·, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð°Ð¶Ð¸Ð¼Ð°ÐµÑ‚ ÐºÐ½Ð¾Ð¿ÐºÑƒ "Ð»Ð°Ð¹Ðº", ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° ÐµÐ´Ð¸Ð½Ð¸Ñ†Ñƒ. ÐžÐ´Ð½Ñƒ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ð»Ð°Ð¹ÐºÐ½ÑƒÑ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·. Ð¢Ð°ÐºÐ¶Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑÐ½ÑÑ‚ÑŒ Ð»Ð°Ð¹Ðº, ÐµÑÐ»Ð¸ ÐµÐ¼Ñƒ Ñ€Ð°Ð·Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»Ð°ÑÑŒ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ°.
// â€¢ Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ð»Ð°Ð¹ÐºÐ¾Ð² Ð² Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸ Ð½Ð¾Ð²Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð½Ðµ ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°Ð»ÑÑ, ÐµÑÐ»Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð° Ñ‚Ð° Ð¶Ðµ ÑÐ°Ð¼Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ°.
// â€¢ Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ñ… Ñ„Ð¾Ñ‚Ð¾ Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð¸Ñ… Ð² Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¾Ð² Ð² localstorage.
// â€¢ Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ async/await, Ð±ÐµÐ· Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐ¼ then.


const ACCESS_KEY = "b081FEgpLH4ZJj_2uyhbhY-W-HPsNBweuKM7AattHpk";
const likeCountEl = document.getElementById('likeCount');
const likeBtnEl = document.getElementById('likeBtn');
const prevBtnEl = document.getElementById('prevBtn');
let liked = false;
let likedImages = JSON.parse(localStorage.getItem('likedImages')) || [];
let history = JSON.parse(localStorage.getItem('history')) || [];

async function getRandomImage() {
    try {
        const response = await fetch(`https://api.unsplash.com/photos/random?client_id=${ACCESS_KEY}`);
        const data = await response.json();
        const imageUrl = data.urls.regular;
        const photographerName = data.user.name;
        const photographerUserName = data.user.username;

        document.getElementById('image').src = imageUrl;
        document.getElementById('photographer').textContent = `Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„: ${photographerName} (@${photographerUserName})`;

        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»Ð¾ÑÑŒ Ð»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ
        liked = likedImages.includes(imageUrl);
        updateLikeButton();

        // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð² Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ
        history.unshift({imageUrl, photographerName});
        localStorage.setItem('history', JSON.stringify(history));
    } catch (error) {
        console.error('Error fetching random image:', error);
    }
}

function updateLikeButton() {
    likeBtnEl.textContent = liked ? 'ðŸ’”' : 'â¤ï¸';
}

likeBtnEl.addEventListener('click', () => {
    liked = !liked;
    updateLikeButton();
    if (liked) {
        likeCountEl.textContent = parseInt(likeCountEl.textContent) + 1;
        likedImages.push(document.getElementById('image').src);
    } else {
        likeCountEl.textContent = parseInt(likeCountEl.textContent) - 1;
        likedImages = likedImages.filter(image => image !== document.getElementById('image').src);       
    }
    localStorage.setItem('likedImages', JSON.stringify(likedImages));
});

prevBtnEl.addEventListener('click', () => {
    if (history.length > 1) {
        history.shift();
        const prevImage = history[0];
        document.getElementById('image').src = prevImage.imageUrl;
        document.getElementById('photographer').textContent = `Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„: ${prevImage.photographerName}`;
    } else {
        alert('No previous images');
    }
});

window.onload = getRandomImage;